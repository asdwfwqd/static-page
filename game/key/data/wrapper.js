function isIE(){var myNav=navigator.userAgent.toLowerCase();return(myNav.indexOf('msie')!=-1)?parseInt(myNav.split('msie')[1]):false;}var version=detectIE();function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}return false;}!function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,h=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,i=/IEMobile/i,j=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,k=/BlackBerry/i,l=/BB10/i,m=/Opera Mini/i,n=/(CriOS|Chrome)(?=.*\bMobile\b)/i,o=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,p=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),q=function(a,b){return a.test(b)},r=function(a){var r=a||navigator.userAgent,s=r.split("[FBAN");return"undefined"!=typeof s[1]&&(r=s[0]),s=r.split("Twitter"),"undefined"!=typeof s[1]&&(r=s[0]),this.apple={phone:q(b,r),ipod:q(c,r),tablet:!q(b,r)&&q(d,r),device:q(b,r)||q(c,r)||q(d,r)},this.amazon={phone:q(g,r),tablet:!q(g,r)&&q(h,r),device:q(g,r)||q(h,r)},this.android={phone:q(g,r)||q(e,r),tablet:!q(g,r)&&!q(e,r)&&(q(h,r)||q(f,r)),device:q(g,r)||q(h,r)||q(e,r)||q(f,r)},this.windows={phone:q(i,r),tablet:q(j,r),device:q(i,r)||q(j,r)},this.other={blackberry:q(k,r),blackberry10:q(l,r),opera:q(m,r),firefox:q(o,r),chrome:q(n,r),device:q(k,r)||q(l,r)||q(m,r)||q(o,r)||q(n,r)},this.seven_inch=q(p,r),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},s=function(){var a=new r;return a.Class=r,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=r:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=s():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=s()):a.isMobile=s()}(this);function handleRatio(){var winH=window.innerHeight;var winW=window.innerWidth;var h=winH;var w=(winH/1136)*800|0;if(w>winW){w=winW;h=(winW/800)*1136|0;}var container=document.querySelector("#game-container");container.style.width=w+"px";container.style.height=h+"px";}function loadGame(){var container=document.querySelector("#game-container");if(isMobile.any){window.location="game.html";}else{var iframe=document.createElement("iframe");iframe.src="game.html";iframe.id="game-frame";container.appendChild(iframe);}}function loadJSON(url,callback){var xobj=new XMLHttpRequest();xobj.open('GET',url,true);xobj.onreadystatechange=function(){if(xobj.readyState==4&&xobj.status=="200"){callback(xobj.responseText);}};xobj.send(null);}function buildFooter(rawjson){var data=JSON.parse(rawjson);var obsolete=isIE()&&isIE()<=11;if(!obsolete)obsolete=(version<=11&&version!==false);var current=new Date();var release=new Date(data.general.year,data.general.month,data.general.day);var theaters=(current>=release)?data.general.released:data.general.theaters;var obsoleteHtml="<img src='data/ui-title-logo.png' /><br /><p>"+theaters+"</p><br /><h1>"+data.outdated.title+"</h1><p>"+data.outdated.body+"</p><p>"+data.outdated.download+" <a href='https://www.google.com/intl/en/chrome/browser/desktop/index.html'>"+data.outdated.chrome+"</a></p><p>"+data.outdated.download+" <a href='https://www.mozilla.org/en-US/firefox/new/'>"+data.outdated.firefox+"</a></p>";var container=document.querySelector("#game-container");container.style.fontSize=data.outdated.fontScale*22+"px";container.style.fontFamily=data.settings.mainFont;if(obsolete){container.className+=" obsolete";container.innerHTML=obsoleteHtml;return;}var footer=document.createElement("footer");var leftCont=document.createElement("div");leftCont.id="left-container";if(data.footer.rating.visible){leftCont.innerHTML="<img src='"+data.footer.rating.image+"' />";}else{leftCont.innerHTML="<img src='"+data.footer.rating.image+"' class ='hide' />";}var centerCont=document.createElement("div");centerCont.id="center-container";centerCont.style.fontSize=data.footer.fontScale+"em";var credits=document.createElement("img");credits.src=data.footer.credits.image;centerCont.appendChild(credits);var copyright=document.createElement("p");copyright.innerHTML=data.footer.copyright;centerCont.appendChild(copyright);var links=document.createElement("p");var linkTypes=["mpaa","parental","ratings","ads","terms","privacy"];var len=linkTypes.length;var inserted=false;while(len--){var section=data.footer[linkTypes[len]];if(section.visible){if(inserted){var divider=document.createElement("span");divider.className="divider";divider.innerText="|"
links.appendChild(divider);}inserted=true;var link;if(section.link){link=document.createElement("a");link.innerHTML=section.text;link.href=section.link;link.target="_blank";}else{link=document.createElement("span");link.innerHTML=section.text;}links.appendChild(link);}}centerCont.appendChild(links);var rightCont=document.createElement("div");rightCont.id="right-container";if(data.footer.wb){if(data.footer.wb.link){if(data.footer.wb.link.length>0){rightCont.innerHTML="<a href='"+data.footer.wb.link+"' target='_blank'><img src='"+data.footer.wb.image+"' /></a>";}}else if(data.footer.wb.image){if(data.footer.wb.image)rightCont.innerHTML="<img src='"+data.footer.wb.image+"' />";}}footer.appendChild(centerCont);footer.appendChild(leftCont);footer.appendChild(rightCont);document.body.appendChild(footer);}loadJSON('data/locale.json',buildFooter);window.addEventListener('resize',handleRatio);handleRatio();loadGame();